## å…³äºYImagePicker 
[ ![Download](https://api.bintray.com/packages/yangpeixing/yimagepicker/androidx/images/download.svg?version=2.4.1) ](https://bintray.com/yangpeixing/yimagepicker/androidx/2.4.1/link)
 - æ”¯æŒæ— ç¼åˆ‡æ¢å°çº¢ä¹¦å‰ªè£æ ·å¼å¹¶è‡ªå®šä¹‰UI
 - æ”¯æŒå¾®ä¿¡ã€é©¬èœ‚çªã€çŸ¥ä¹ç­‰å¤šä¸ªä¸åŒé£æ ¼æ ·å¼å®šåˆ¶
 - æ”¯æŒå›¾ç‰‡ç›´æ¥é¢„è§ˆå’Œç¼–è¾‘é¢„è§ˆï¼ˆæ’åºã€åˆ é™¤ï¼‰
 - æ”¯æŒå•å›¾è‡ªå®šä¹‰æ¯”ä¾‹å‰ªè£
 - æ”¯æŒè§†é¢‘ã€å›¾ç‰‡ã€GIFå›¾ç­‰ä¸åŒç±»å‹æ··åˆåŠ è½½
 - æ”¯æŒè§†é¢‘å›¾ç‰‡æ··åˆå•é€‰æˆ–å¤šé€‰
 - å°çº¢ä¹¦å‰ªè£æ ·å¼æ”¯æŒè§†é¢‘é¢„è§ˆ
 - å¾®ä¿¡æ ·å¼æ”¯æŒæŒ‡å®šå•ä¸€ç±»å‹é€‰æ‹©ï¼ˆå›¾ç‰‡ã€è§†é¢‘ï¼‰
 - å¾®ä¿¡æ ·å¼æ”¯æŒå¤šæ¬¡é€‰æ‹©çŠ¶æ€ä¿å­˜
 - å¾®ä¿¡æ ·å¼æ”¯æŒæŒ‡å®šæŸäº›åª’ä½“æ–‡ä»¶ä¸å¯é€‰æ‹©
 - é€‰æ‹©ç»“æœç›´æ¥å›è°ƒï¼Œæ‹’ç»é…ç½®ActivityForResultï¼Œå“ªé‡Œè°ƒç”¨å“ªé‡Œå¤„ç†ç»“æœ
 - è½»é‡çº§ï¼Œaarå¤§å°300Kï¼Œæ— soåº“ï¼Œæ— ä»»ä½•ç¬¬ä¸‰æ–¹ä¾èµ–
 - æ”¯æŒandroidxå’Œsupport
 - æ°¸ä¹…ç»´æŠ¤


## å¼•å…¥ä¾èµ–
**androidxç‰ˆæœ¬ï¼š**

```java
implementation 'com.ypx.yimagepicker:androidx:2.4.1'
```
**supportç‰ˆæœ¬ï¼š**
```java
implementation 'com.ypx.yimagepicker:support:2.4.1'
```

## æ ¸å¿ƒåŸç†
YImagePickerä¸ä¸»é¡¹ç›®é€šè¿‡presenterè¿›è¡Œäº¤äº’ä¸è§£è€¦ï¼Œpresenteré‡‡ç”¨åºåˆ—åŒ–æ¥å£çš„æ–¹å¼å®ç°ã€‚å›è°ƒé‡‡ç”¨åµŒå…¥fragmentçš„æ–¹å¼å®ç°ï¼Œç±»ä¼¼äºGlideæˆ–RxPermisson.åŸç†ä¸Šè¿˜æ˜¯ä½¿ç”¨OnActivityResult,ä½†æ— éœ€å†é…ç½®requestCodeå¹¶ä¸”æ”¯æŒè·¨è¿›ç¨‹å›è°ƒã€‚

å°çº¢ä¹¦æ ·å¼éœ€è¦å®ç°ï¼šICropPickerBindPresenter
å¾®ä¿¡æ ·å¼éœ€è¦å®ç°ï¼šIMultiPickerBindPresenter

[apkä½“éªŒåœ°å€](https://www.pgyer.com/Wfhb)

## æ•ˆæœå›¾é›†
 - de'moæ•ˆæœ
 
![demo](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hcHAtc2NyZWVuc2hvdC5wZ3llci5jb20vaW1hZ2Uvdmlldy9hcHBfc2NyZWVuc2hvdHMvZWE4MjEzOTQzZTliNWJiY2NiY2E3NTIzNTZmZjlkMTYtNTI4) 

 - å¾®ä¿¡æ ·å¼
 
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hcHAtc2NyZWVuc2hvdC5wZ3llci5jb20vaW1hZ2Uvdmlldy9hcHBfc2NyZWVuc2hvdHMvYjc3MjUwMmU3YjBhOTk1ZTJhZGY4NjFkZTg1YjhiMzAtNTI4)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hcHAtc2NyZWVuc2hvdC5wZ3llci5jb20vaW1hZ2Uvdmlldy9hcHBfc2NyZWVuc2hvdHMvMDQ4ZjY2MjI3YTQxYTUzYWRlNWM5ZmZhZWRkYzc1MGMtNTI4) 

 - è‡ªå®šä¹‰æ ·å¼
 
 ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hcHAtc2NyZWVuc2hvdC5wZ3llci5jb20vaW1hZ2Uvdmlldy9hcHBfc2NyZWVuc2hvdHMvODZmMmNkNDQ4MDIzMzFmODg3MWQ5ODFiNmU0NDQ1NjAtNTI4)
 ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hcHAtc2NyZWVuc2hvdC5wZ3llci5jb20vaW1hZ2Uvdmlldy9hcHBfc2NyZWVuc2hvdHMvY2M5MzVmNWVkZTM1NmJlYjkyOTIwYjJmZjczZWRjNjgtNTI4) 
 
 - å°çº¢ä¹¦æ ·å¼

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hcHAtc2NyZWVuc2hvdC5wZ3llci5jb20vaW1hZ2Uvdmlldy9hcHBfc2NyZWVuc2hvdHMvZDUzODc0N2VlZTA2ZDVjNzFiMzgwNTEyMTg0ZTczNTMtNTI4)

 - è‡ªå®šä¹‰æ¯”ä¾‹å‰ªè£
 
 ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9hcHAtc2NyZWVuc2hvdC5wZ3llci5jb20vaW1hZ2Uvdmlldy9hcHBfc2NyZWVuc2hvdHMvMTRjZDJiZjIxMzk1MjVhMDhmZWZhNjdjNmExMjkwMWMtNTI4)

 
## å¾®ä¿¡å›¾ç‰‡é€‰æ‹©
æ”¯æŒè§†é¢‘ã€GIFã€é•¿å›¾é€‰æ‹©ï¼Œæ”¯æŒå•å¼ å¤šæ¯”ä¾‹å‰ªè£ï¼Œæ”¯æŒå¤šå›¾é¢„è§ˆã€ç¼–è¾‘ã€ä»¥åŠè°ƒåºï¼Œæ”¯æŒç›´æ¥æ‹ç…§ã€‚è°ƒç”¨å‰è¯·æŒ‰ç…§demoå®ç°IMultiPickerBindPresenter æ¥å£          

 - **å¤šå›¾/å•å›¾é€‰æ‹©â€”â€” æ”¯æŒè§†é¢‘å’Œå›¾ç‰‡å•ä¸€é€‰æ‹©æ¨¡å¼**
```java
//å¾®ä¿¡æ ·å¼å¤šé€‰ï¼ŒWXImgPickerPresenterä¸ºç”¨æˆ·è‡ªå®šä¹‰çš„å¾®ä¿¡æ˜¾ç¤ºæ ·å¼ï¼Œ                                  
// ä»¥åŠä¸€äº›äº¤äº’é€»è¾‘ï¼Œå®ç°è‡ªIMultiPickerBindPresenteræ¥å£                                   
ImagePicker.withMulti(new WXImgPickerPresenter())                            
        .setMaxCount(9)//è®¾ç½®æœ€å¤§é€‰æ‹©æ•°é‡                                            
        .setColumnCount(4)//è®¾ç½®æ˜¾ç¤ºåˆ—æ•°                                           
        .showVideo(true)//è®¾ç½®æ˜¯å¦åŠ è½½è§†é¢‘                                           
        .showGif(true)//è®¾ç½®æ˜¯å¦åŠ è½½GIF                                            
        .showCamera(true)//è®¾ç½®æ˜¯å¦æ˜¾ç¤ºæ‹ç…§æŒ‰é’®ï¼ˆåœ¨åˆ—è¡¨ç¬¬ä¸€ä¸ªï¼‰          
        .showImage(true)//è®¾ç½®æ˜¯å¦åŠ è½½å›¾ç‰‡
        .setMaxVideoDuration(120000)//è®¾ç½®è§†é¢‘å¯é€‰æ‹©çš„æœ€å¤§æ—¶é•¿
        //è®¾ç½®åªèƒ½é€‰æ‹©è§†é¢‘æˆ–å›¾ç‰‡
        .setSinglePickImageOrVideoType(true)
        //è®¾ç½®åªèƒ½é€‰æ‹©ä¸€ä¸ªè§†é¢‘ 
        .setVideoSinglePick(true)               
        //è®¾ç½®ä¸‹æ¬¡é€‰æ‹©éœ€è¦å±è”½çš„å›¾ç‰‡æˆ–è§†é¢‘ï¼ˆç®€å•ç‚¹å°±æ˜¯ä¸å¯é‡å¤é€‰æ‹©ï¼‰                                      
        .setShieldList(new ArrayList<String>())                              
        //è®¾ç½®ä¸‹æ¬¡é€‰æ‹©éœ€è¦å¸¦å…¥çš„å›¾ç‰‡å’Œè§†é¢‘ï¼ˆç®€å•ç‚¹å°±æ˜¯è®°å½•ä¸Šæ¬¡é€‰æ‹©çš„å›¾ç‰‡ï¼Œå¯ä»¥å–æ¶ˆä¹‹å‰é€‰æ‹©ï¼‰                          
        .setLastImageList(new ArrayList<String>())                                                             
        //è°ƒç”¨å¤šé€‰                                                               
        .pick(this, new OnImagePickCompleteListener() {                      
            @Override                                                        
            public void onImagePickComplete(ArrayList<ImageItem> items) {    
                //å¤„ç†å›è°ƒå›æ¥çš„å›¾ç‰‡ä¿¡æ¯ï¼Œä¸»çº¿ç¨‹                                            
            }                                                                
        });     
        
//Fragmentè°ƒç”¨ï¼š    
MultiImagePickerFragment fragment = ImagePicker.withMultiFragment(new WXImgPickerPresenter())
				.setMaxCount(9)//è®¾ç½®æœ€å¤§é€‰æ‹©æ•°é‡      
              	...//çœç•¥ä»¥ä¸Šè‹¥å¹²å±æ€§
               .pickWithFragment(new OnImagePickCompleteListener() {
                    @Override
                    public void onImagePickComplete(ArrayList<ImageItem> items) {
                        //å¤„ç†å›è°ƒå›æ¥çš„å›¾ç‰‡ä¿¡æ¯ï¼Œä¸»çº¿ç¨‹         
                    }
                });
});
                                                         
```
 - **å•å¼ å‰ªè£ â€”â€” æ”¯æŒè‡ªå®šä¹‰å‰ªè£æ¯”ä¾‹**
```java
//å¾®ä¿¡æ ·å¼å¤šé€‰ï¼ŒWXImgPickerPresenterä¸ºç”¨æˆ·è‡ªå®šä¹‰çš„å¾®ä¿¡æ˜¾ç¤ºæ ·å¼ï¼Œ                                  
// ä»¥åŠä¸€äº›äº¤äº’é€»è¾‘ï¼Œå®ç°è‡ªIMultiPickerBindPresenteræ¥å£                                   
ImagePicker.withMulti(new WXImgPickerPresenter())                            
       	...//çœç•¥ä»¥ä¸Šæ‰€æœ‰å…¬å…±å±æ€§                                              
        .setCropRatio(1, 1)//è®¾ç½®å‰ªè£æ¯”ä¾‹   1ï¼š1            
        .cropSaveFilePath("å‰ªè£å›¾ç‰‡ä¿å­˜åœ°å€")
        .cropRectMinMargin(0)//è®¾ç½®å‰ªè£è¾¹æ¡†é—´è·,å•ä½ px                           
        //è°ƒç”¨å‰ªè£                                                              
        .crop(this, new OnImagePickCompleteListener() {                      
            @Override                                                        
            public void onImagePickComplete(ArrayList<ImageItem> items) {    
                //å¤„ç†å›è°ƒå›æ¥çš„å›¾ç‰‡ä¿¡æ¯ï¼Œä¸»çº¿ç¨‹                                            
            }                                                                
        });                                                                  
```
 - **é¢„è§ˆ â€”â€” æ”¯æŒæ™®é€šé¢„è§ˆå’Œé¢„è§ˆç¼–è¾‘ï¼ˆè°ƒåºã€åˆ é™¤ï¼‰**
```java
  //é¢„è§ˆæ•°æ®æºï¼Œåªæ¥å—ArrayList<String> å’ŒArrayList<ImageItem> ä¸¤ç§æ³›å‹                          
ArrayList<String> imageList = new ArrayList<>();                                 
//é»˜è®¤é€‰æ‹©çš„index                                                                     
int currentPos = 1;                                                              
//è°ƒç”¨é¢„è§ˆ                                                                           
ImagePicker.withMulti(new WXImgPickerPresenter())                                
        //ç¬¬äºŒä¸ªå‚æ•°ä¸ºé¢„è§ˆå›¾ç‰‡æ•°ç»„ã€ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºé»˜è®¤é€‰ä¸­çš„indexï¼Œç¬¬å››ä¸ªå‚æ•°ä¸ºé¢„è§ˆå›è°ƒï¼Œ                              
        //å¦‚æœç¬¬å››ä¸ªå‚æ•°ä¸ºnull,åˆ™ä»£è¡¨æ— éœ€å¯¹é¢„è§ˆçš„å›¾ç‰‡è¿›è¡Œç¼–è¾‘ï¼ˆè°ƒåºã€åˆ é™¤æ“ä½œï¼‰ï¼Œåä¹‹å¯ä»¥ç¼–è¾‘é¢„è§ˆå›¾                        
        .preview(this, imageList, currentPos, new OnImagePickCompleteListener() {
            @Override                                                            
            public void onImagePickComplete(ArrayList<ImageItem> items) {        
                //å¤„ç†é¢„è§ˆå›è°ƒçš„æ•°æ®                                                      
            }                                                                    
        });                                                                      
```

 - **æ‹ç…§**
```java
  //ç›´æ¥è°ƒç”¨æ‹ç…§                                                                                             
ImagePicker.withMulti(new WXImgPickerPresenter()).takePhoto(this, new OnImagePickCompleteListener() {
    @Override                                                                                        
    public void onImagePickComplete(ArrayList<ImageItem> imageItems) {                               
        //å¤„ç†æ‹ç…§å›è°ƒ                                                                                                                                                                   
    }                                                                                                
});                                                                                                  
```
 
 -**è‡ªå®šä¹‰presenteräº¤äº’ â€”â€” æ”¯æŒå›¾ç‰‡æ–‡ä»¶å¤¹åˆ—è¡¨å¼¹å…¥æ–¹å‘ã€æ”¯æŒå›¾ç‰‡itemè‡ªå®šä¹‰**
```java
/**
 * ä½œè€…ï¼šyangpeixing on 2018/9/26 15:57
 * åŠŸèƒ½ï¼šå¾®ä¿¡æ ·å¼å›¾ç‰‡é€‰æ‹©å™¨
 */
public class WXImgPickerPresenter implements IMultiPickerBindPresenter {                                       
                                                                                                               
    @Override                                                                                                  
    public void displayListImage(ImageView imageView, ImageItem item, int size) {                              
        Glide.with(imageView.getContext()).load(item.path).into(imageView);                                    
    }                                                                                                          
                                                                                                               
    @Override                                                                                                  
    public void displayPerViewImage(ImageView imageView, String url) {                                         
        Glide.with(imageView.getContext()).load(url).into(imageView);                                          
    }                                                                                                          
                                                                                                               
    @Override                                                                                                  
    public PickerUiConfig getUiConfig(Context context) {                                                       
        PickerUiConfig config = new PickerUiConfig();                                                          
        //æ˜¯å¦æ²‰æµ¸å¼çŠ¶æ€æ ï¼ŒçŠ¶æ€æ é¢œè‰²å°†æ ¹æ®TopBarBackgroundColoræŒ‡å®šï¼Œ                                                            
        // å¹¶åŠ¨æ€æ›´æ”¹çŠ¶æ€æ å›¾æ ‡é¢œè‰²                                                                                        
        config.setImmersionBar(true);                                                                          
        //è®¾ç½®ä¸»é¢˜è‰²                                                                                                
        config.setThemeColor(Color.parseColor("#09C768"));                                                     
        //è®¾ç½®é€‰ä¸­å’Œæœªé€‰ä¸­æ—¶å›¾æ ‡                                                                                          
        config.setSelectedIconID(R.mipmap.picker_wechat_select);                                               
        config.setUnSelectIconID(R.mipmap.picker_wechat_unselect);                                             
        //è®¾ç½®è¿”å›å›¾æ ‡ä»¥åŠè¿”å›å›¾æ ‡é¢œè‰²                                                                                       
        config.setBackIconID(R.mipmap.picker_icon_back_black);                                                 
        config.setBackIconColor(Color.BLACK);                                                                  
        //è®¾ç½®æ ‡é¢˜æ èƒŒæ™¯è‰²å’Œå¯¹é½æ–¹å¼ï¼Œè®¾ç½®æ ‡é¢˜æ æ–‡æœ¬é¢œè‰²                                                                              
        config.setTitleBarBackgroundColor(Color.parseColor("#F1F1F1"));                                        
        config.setTitleBarGravity(Gravity.START);                                                              
        config.setTitleColor(Color.BLACK);                                                                     
        //è®¾ç½®æ ‡é¢˜æ å³ä¸Šè§’å®ŒæˆæŒ‰é’®é€‰ä¸­å’Œæœªé€‰ä¸­æ ·å¼ï¼Œä»¥åŠæ–‡å­—é¢œè‰²                                                                          
        int r = ViewSizeUtils.dp(context, 2);                                                                  
        config.setOkBtnSelectBackground(CornerUtils.cornerDrawable(Color.parseColor("#09C768"), r));           
        config.setOkBtnUnSelectBackground(CornerUtils.cornerDrawable(Color.parseColor("#B4ECCE"), r));         
        config.setOkBtnSelectTextColor(Color.WHITE);                                                           
        config.setOkBtnUnSelectTextColor(Color.parseColor("#50ffffff"));                                       
        config.setOkBtnText("å®Œæˆ");                                                                             
        //è®¾ç½®é€‰æ‹©å™¨èƒŒæ™¯è‰²                                                                                             
        config.setPickerBackgroundColor(Color.WHITE);                                                          
        //è®¾ç½®é€‰æ‹©å™¨itemèƒŒæ™¯è‰²                                                                                         
        config.setPickerItemBackgroundColor(Color.parseColor("#484848"));                                      
        //è®¾ç½®åº•éƒ¨æ é¢œè‰²                                                                                              
        config.setBottomBarBackgroundColor(Color.parseColor("#333333"));                                       
        //è®¾ç½®æ‹ç…§æŒ‰é’®å›¾æ ‡å’ŒèƒŒæ™¯è‰²                                                                                         
        config.setCameraIconID(R.mipmap.picker_ic_camera);                                                     
        config.setCameraBackgroundColor(Color.parseColor("#484848"));  
        
       	//æ ‡é¢˜æ æ¨¡å¼ï¼Œä»æ ‡é¢˜æ é€‰æ‹©ç›¸å†Œ
        config.setPickStyle(PickerUiConfig.PICK_STYLE_TITLE); 
        //è®¾ç½®é€‰æ‹©å™¨è‡ªå®šä¹‰itemæ ·å¼
        config.setPickerItemView(new CustomPickerItem(context));                                       
        return config;                                                                                         
    }                                                                                                          
                                                                                                               
    @Override                                                                                                  
    public void tip(Context context, String msg) {                                                             
        Toast.makeText(context, msg, Toast.LENGTH_SHORT).show();                                               
    }                                                                                                          
                                                                                                               
    @Override                                                                                                  
    public void imageItemClick(Context context, ImageItem imageItem, ArrayList<ImageItem> selectImageList,     
                               ArrayList<ImageItem> allSetImageList, MultiGridAdapter adapter) {               
        tip(context, "æˆ‘æ˜¯è‡ªå®šä¹‰çš„å›¾ç‰‡ç‚¹å‡»äº‹ä»¶");                                                                          
    }                                                                                                          
}                                                                                                                                                                                                                                                                                                                                       
```
 
## å°çº¢ä¹¦å›¾ç‰‡å‰ªè£é€‰æ‹©      
é«˜ä»¿å°çº¢ä¹¦å›¾ç‰‡å‰ªè£æ¡†æ¶ï¼Œæ”¯æŒè§†é¢‘ä»¥åŠå¤šå›¾å‰ªè£ã€æ”¯æŒfragmentæ ·å¼ä¾µå…¥

 - **Activityç›´æ¥è°ƒç”¨**
```java
//è°ƒç”¨å°çº¢ä¹¦å‰ªè£å›è°ƒçš„imageItemsé‡Œï¼ŒimageItem.pathæ˜¯åŸå›¾ï¼Œ                                    
// imageItem.getCropUrl()æ‰æ˜¯å‰ªè£åçš„å›¾ç‰‡                                             
ImagePicker.withCrop(new RedBookCropPresenter())                              
        //è®¾ç½®ç¬¬ä¸€å¼ å›¾ä¿¡æ¯ï¼Œå¯ä¸ºnull,è®¾ç½®ä»¥åï¼Œé€‰æ‹©å™¨ä¼šé»˜è®¤                                         
        // ä»¥ç¬¬ä¸€å¼ å›¾ç‰‡çš„å‰ªè£æ–¹å¼å‰ªè£åé¢æ‰€æœ‰çš„å›¾ç‰‡                                               
        .setFirstImageItem(new ImageItem())                                   
        .setFirstImageUrl("è¿™é‡Œå¡«å…¥å¤–éƒ¨å·²ç»é€‰æ‹©çš„ç¬¬ä¸€å¼ å›¾ç‰‡åœ°å€url")                            
        //è®¾ç½®è¦é€‰æ‹©çš„æœ€å¤§æ•°                                                           
        .setMaxCount(count)                                                                                             
        //è®¾ç½®æ˜¯å¦åŠ è½½è§†é¢‘                                                            
        .showVideo(true)                                                      
        //è®¾ç½®ç¬¬ä¸€ä¸ªitemæ˜¯å¦æ‹ç…§                                                       
        .showCamera(true)                                                     
        //è®¾ç½®å‰ªè£å®Œå›¾ç‰‡ä¿å­˜è·¯å¾„                                                         
        .setCropPicSaveFilePath("å›¾ç‰‡ä¿å­˜è·¯å¾„")                                     
        .pick(this, new OnImagePickCompleteListener() {                       
            @Override                                                         
            public void onImagePickComplete(ArrayList<ImageItem> imageItems) {
                //è°ƒç”¨å°çº¢ä¹¦å‰ªè£å›è°ƒçš„imageItemsé‡Œï¼ŒimageItem.pathæ˜¯åŸå›¾ï¼Œ                    
                // imageItem.getCropUrl()æ‰æ˜¯å‰ªè£åçš„å›¾ç‰‡                             
                //TODOå‰ªè£å›è°ƒ                                                    
            }                                                                 
        });                                                                                                                                               
```
 - **FragmentåµŒå¥—è°ƒç”¨**

```java
//è°ƒç”¨å°çº¢ä¹¦å‰ªè£å›è°ƒçš„imageItemsé‡Œï¼ŒimageItem.pathæ˜¯åŸå›¾ï¼Œ                                                  
// imageItem.getCropUrl()æ‰æ˜¯å‰ªè£åçš„å›¾ç‰‡                                                           
ImagePickAndCropFragment fragment = ImagePicker.withCropFragment(new RedBookCropPresenter())                                      
       	//...çœç•¥ä»¥ä¸Šå±æ€§                                             
        .pickWithFragment(new OnImagePickCompleteListener() {
                    @Override
                    public void onImagePickComplete(ArrayList<ImageItem> items) {
                        //TODO å›¾ç‰‡å‰ªè£å®Œå›è°ƒ ä¸»çº¿ç¨‹
                    }
                });     
                
//---------å¤–éƒ¨Activityéœ€è¦é‡å†™çš„æ–¹æ³•------------         
@Override                                                                                   
public void onBackPressed() {                                                               
    if (null != mFragment && mFragment.onBackPressed()) {                                   
        return;                                                                             
    }                                                                                       
    super.onBackPressed();                                                                  
}                                                                                           
                                                                                            
@Override                                                                                   
protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {   
    super.onActivityResult(requestCode, resultCode, data);                                  
    if (mFragment != null) {                                                                
        mFragment.onTakePhotoResult(requestCode, resultCode);                               
    }                                                                                       
}                                                                                                                                               
```


 - **è‡ªå®šä¹‰Presenteräº¤äº’**
```java
/**
 - Description: å°çº¢ä¹¦æ ·å¼æ¡†æ¶æ•°æ®ç»‘å®š
 - <p>
 - Author: peixing.yang
 - Date: 2019/2/21
 */
public class RedBookCropPresenter implements ICropPickerBindPresenter {

    @Override
    public void displayListImage(ImageView imageView, ImageItem item, int size) {
        Glide.with(imageView.getContext()).load(item.path).into(imageView);
    }

    /**
     * åŠ è½½å‰ªè£åŒºåŸŸé‡Œçš„å›¾ç‰‡
     *
     * @param imageView imageView
     * @param item      å½“å‰å›¾ç‰‡ä¿¡æ¯
     */
    @Override
    public void displayCropImage(ImageView imageView, ImageItem item) {
        Glide.with(imageView.getContext()).load(item.path)
                .apply(new RequestOptions().format(DecodeFormat.PREFER_ARGB_8888))
                .into(imageView);
    }

    @Override
    public CropUiConfig getUiConfig(Context context) {
        CropUiConfig config = new CropUiConfig();
        //è®¾ç½®ä¸»é¢˜è‰²ï¼ŒåŒ…å«é€‰ä¸­æ ·å¼çš„åœ†å½¢èƒŒæ™¯è‰²å’Œè¾¹æ¡†è‰²
        config.setThemeColor(Color.RED);
        //è®¾ç½®itemæœªé€‰ä¸­å›¾æ ‡
        config.setUnSelectIconID(R.mipmap.picker_icon_unselect);
        //è®¾ç½®ç›¸æœºå›¾æ ‡
        config.setCameraIconID(R.mipmap.picker_ic_camera);
        //è®¾ç½®è¿”å›å›¾æ ‡
        config.setBackIconID(R.mipmap.picker_icon_close_black);
        //è®¾ç½®å‰ªè£åŒºåŸŸè‡ªé€‚åº”å›¾æ ‡
        config.setFitIconID(R.mipmap.picker_icon_fit);
        //è®¾ç½®å‰ªè£åŒºåŸŸå……æ»¡å›¾æ ‡
        config.setFullIconID(R.mipmap.picker_icon_full);
        //è®¾ç½®ç•™ç™½å›¾æ ‡
        config.setGapIconID(R.mipmap.picker_icon_haswhite);
        //è®¾ç½®å¡«å……å›¾æ ‡
        config.setFillIconID(R.mipmap.picker_icon_fill);
        //è®¾ç½®è§†é¢‘æš‚åœå›¾æ ‡
        config.setVideoPauseIconID(R.mipmap.video_play_small);
        //è®¾ç½®è¿”å›æŒ‰é’®é¢œè‰²
        config.setBackIconColor(Color.WHITE);
        //è®¾ç½®å‰ªè£åŒºåŸŸé¢œè‰²
        config.setCropViewBackgroundColor(Color.parseColor("#111111"));
        //è®¾ç½®æ‹ç…§å›¾æ ‡èƒŒæ™¯è‰²
        config.setCameraBackgroundColor(Color.BLACK);
        //è®¾ç½®æ ‡é¢˜æ èƒŒæ™¯è‰²
        config.setTitleBarBackgroundColor(Color.BLACK);
        //è®¾ç½®ä¸‹ä¸€æ­¥æŒ‰é’®é€‰ä¸­æ–‡å­—é¢œè‰²
        config.setNextBtnSelectedTextColor(Color.WHITE);
        //è®¾ç½®ä¸‹ä¸€æ­¥æŒ‰é’®æœªé€‰ä¸­æ–‡å­—é¢œè‰²
        config.setNextBtnUnSelectTextColor(Color.WHITE);
        //è®¾ç½®æ ‡é¢˜æ–‡å­—é¢œè‰²
        config.setTitleTextColor(Color.WHITE);
        //è®¾ç½®itemåˆ—è¡¨èƒŒæ™¯è‰²
        config.setGridBackgroundColor(Color.BLACK);
        //è®¾ç½®ä¸‹ä¸€æ­¥æŒ‰é’®æœªé€‰ä¸­æ—¶èƒŒæ™¯drawable
        config.setNextBtnUnSelectBackground(PCornerUtils.cornerDrawable(Color.parseColor("#B0B0B0"), PViewSizeUtils.dp(context, 30)));
        //è®¾ç½®ä¸‹ä¸€æ­¥æŒ‰é’®é€‰ä¸­æ—¶èƒŒæ™¯drawable
        config.setNextBtnSelectedBackground(PCornerUtils.cornerDrawable(Color.RED, PViewSizeUtils.dp(context, 30)));
        //è®¾ç½®æ˜¯å¦æ˜¾ç¤ºä¸‹ä¸€æ­¥æ•°é‡æç¤º
        config.setShowNextCount(false);
        //è®¾ç½®ä¸‹ä¸€æ­¥æŒ‰é’®æ–‡å­—
        config.setNextBtnText("ä¸‹ä¸€æ­¥");
        return config;
    }

    /**
     * é€‰æ‹©è¶…è¿‡æ•°é‡é™åˆ¶æç¤º
     *
     * @param context    ä¸Šä¸‹æ–‡
     * @param maxCount   æœ€å¤§æ•°é‡
     * @param defaultTip é»˜è®¤æç¤ºæ–‡æœ¬ â€œæœ€å¤šé€‰æ‹©maxCountå¼ å›¾ç‰‡â€
     */
    @Override
    public void overMaxCountTip(Context context, int maxCount, String defaultTip) {
        if (context == null) {
            return;
        }
        AlertDialog.Builder builder = new AlertDialog.Builder(context);
        builder.setMessage(defaultTip);
        builder.setPositiveButton(com.ypx.imagepicker.R.string.picker_str_isee,
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialogInterface, int i) {
                        dialogInterface.dismiss();
                    }
                });
        AlertDialog dialog = builder.create();
        dialog.show();
    }

    /**
     * åœ¨å•é€‰è§†é¢‘é‡Œï¼Œç‚¹å‡»è§†é¢‘itemä¼šè§¦å‘æ­¤å›è°ƒ
     *
     * @param activity  é¡µé¢
     * @param imageItem å½“å‰é€‰ä¸­è§†é¢‘
     */
    @Override
    public void clickVideo(Activity activity, ImageItem imageItem) {
        Toast.makeText(activity, imageItem.path, Toast.LENGTH_SHORT).show();
    }
}

```
## åæœŸä¼˜åŒ–

 - **å¾®ä¿¡é€‰æ‹©æ¡†æ¶æš‚ä¸æ”¯æŒå›¾ç‰‡é«˜çº§ç¼–è¾‘(è´´çº¸ã€å‰ªè£ã€æ ‡ç­¾ç­‰)ï¼ŒåæœŸä¼šåŠ å…¥**
 - **å›¾ç‰‡å‰ªè£æš‚ä¸æ”¯æŒæ—‹è½¬**
 - **è§†é¢‘é¢„è§ˆæ¡†æ¶åˆ‡æ¢ï¼ˆåæ§½ï¼šå®˜æ–¹videoViewå¤ªéš¾ç”¨äº†~~/(ã„’oã„’)/~~ï¼‰**


æœ¬åº“æ¥æºäºmars App,æƒ³è¦ä½“éªŒåŸå¸‚æœ€æ–°çš„åƒå–ç©ä¹ï¼Œæ¬¢è¿è¯»è€…ä¸‹è½½ä½“éªŒmars!





Githubåœ°å€ï¼š[https://github.com/yangpeixing/YPXImagePicker](https://github.com/yangpeixing/YPXImagePicker)ï¼ˆä½ çš„starå°±æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›~ğŸŒ¹ï¼‰
ä½œè€…ï¼š[calorYang](https://blog.csdn.net/qq_16674697)
emailï¼š313930500@qq.com

