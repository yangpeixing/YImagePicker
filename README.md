### å…³äºYImagePicker 
[ç‚¹å‡»æŸ¥çœ‹2.xç‰ˆæœ¬readme](https://github.com/yangpeixing/YImagePicker/blob/master/README_2_x.md)

æœ¬æ–‡æ¡£æ›´æ–°äº:2020/4/15 ä¸Šåˆ10ç‚¹36åˆ†

[ ![Download](https://api.bintray.com/packages/yangpeixing/yimagepicker/androidx/images/download.svg?version=3.1.4) ](https://bintray.com/yangpeixing/yimagepicker/androidx/3.1.4/link)

 - æ”¯æŒå°çº¢ä¹¦å¤šå›¾å‰ªè£ã€å¾®ä¿¡å¤šå›¾é€‰æ‹©ã€å•å›¾å‰ªè£ã€å¤šå›¾æ‰¹é‡å‰ªè£ã€å¤§å›¾é¢„è§ˆ
 - æ”¯æŒè‡ªå®šä¹‰æ‰€æœ‰UIï¼ŒåŒ…æ‹¬æ ‡é¢˜æ ã€åº•éƒ¨æ ã€åˆ—è¡¨itemã€æ–‡ä»¶å¤¹itemã€å‰ªè£é¡µé¢ã€é¢„è§ˆé¡µé¢ç­‰
 - æ”¯æŒ13ç§è§†é¢‘å›¾ç‰‡æ ¼å¼æ··åˆåŠ è½½ï¼Œæ”¯æŒè¿‡æ»¤æ‰æŒ‡å®šæ ¼å¼æ–‡ä»¶
 - æ”¯æŒå¤§å›¾é¢„è§ˆï¼Œæ”¯æŒè¶…é•¿å›¾ã€è¶…å¤§å›¾ï¼Œæ‹’ç»too lagre(å·²ä¿®å¤å•å›¾å‰ªè£é•¿å›¾)
 - æ”¯æŒè‡ªå®šä¹‰å‰ªè£æ¯”ä¾‹ã€å‰ªè£è¾¹è·ã€åœ†å½¢å‰ªè£ã€é•‚ç©º/å……æ»¡å‰ªè£ï¼ˆä»¿æœ€æ–°å¾®ä¿¡å›¾ç‰‡å¤´åƒé€‰æ‹©ï¼‰
 - æ”¯æŒè§†é¢‘å¤šé€‰å’Œé¢„è§ˆ
 - æ”¯æŒåªé€‰æ‹©å›¾ç‰‡æˆ–è€…è§†é¢‘ç±»å‹
 - æ”¯æŒæ¢å¤ä¸Šä¸€æ¬¡é€‰ä¸­çš„å›¾ç‰‡çŠ¶æ€ï¼ˆå¾®ä¿¡æ ·å¼ï¼‰
 - æ”¯æŒå±è”½æŒ‡å®šåª’ä½“æ–‡ä»¶ï¼ˆå¾®ä¿¡æ ·å¼ï¼‰
 - é€‰æ‹©ç»“æœç›´æ¥å›è°ƒï¼Œæ‹’ç»é…ç½®ActivityForResult+requestCodeï¼Œå³è°ƒç”¨å³å¤„ç†
 - æ”¯æŒé€‰æ‹©å™¨è°ƒç”¨å¤±è´¥å›è°ƒ
 - æ”¯æŒè‡ªå®šä¹‰å›è°ƒç±»å‹
 - æ”¯æŒç›´æ¥å›è°ƒåª’ä½“ç›¸å†Œåˆ—è¡¨åŠæ–‡ä»¶åˆ—è¡¨
 - æ”¯æŒé€‰æ‹©å™¨æ‰€æœ‰æ–‡æ¡ˆä¿®æ”¹ã€å›½é™…åŒ–å®šåˆ¶
 - æ”¯æŒå¤šç§ç‰¹æ®Šéœ€æ±‚è¦†ç›–ï¼Œæ”¯æŒè‡ªå®šä¹‰é€‰æ‹©å™¨æ‹¦æˆªäº‹ä»¶
 - å·²å…¨é¢é€‚é…androidQ
 - æ”¯æŒç›´æ¥æ‹æ‘„è§†é¢‘ã€ç…§ç‰‡ç­‰
 - è½»é‡çº§ï¼Œaarå¤§å°ä¸è¶…è¿‡300Kï¼Œæ— soåº“ï¼Œæ— ä»»ä½•ç¬¬ä¸‰æ–¹ä¾èµ–
 - æ”¯æŒandroidxå’Œsupport
 - æ°¸ä¹…ç»´æŠ¤




### å¼•å…¥ä¾èµ–
**androidxç‰ˆæœ¬ï¼š**

```java
implementation 'com.ypx.yimagepicker:androidx:3.1.4'
```
**supportç‰ˆæœ¬ï¼šåæœŸå¯èƒ½ä¸å†ç»´æŠ¤ï¼Œè¯·ä½¿ç”¨è€…å°½æ—©åˆ‡æ¢androidx** ï¼ˆsupportä¾èµ–æœ€é«˜å…¼å®¹28ï¼‰
```java
implementation 'com.ypx.yimagepicker:support:3.1.4.1'
```

### æ ¸å¿ƒåŸç†
YImagePickerä¸ä¸»é¡¹ç›®é€šè¿‡IPickerPresenterè¿›è¡Œäº¤äº’ä¸è§£è€¦ï¼Œpresenteré‡‡ç”¨åºåˆ—åŒ–æ¥å£çš„æ–¹å¼å®ç°ã€‚ä½¿ç”¨è€…éœ€è¦è‡ªè¡Œå®ç°presenterçš„æ–¹æ³•ã€‚é€‰æ‹©å™¨å›è°ƒé‡‡ç”¨åµŒå…¥fragmentçš„æ–¹å¼å®ç°ï¼Œç±»ä¼¼äºGlideæˆ–RxPermisson.åŸç†ä¸Šè¿˜æ˜¯ä½¿ç”¨OnActivityResult,ä½†æ— éœ€å†é…ç½®requestCodeå¹¶ä¸”æ”¯æŒè·¨è¿›ç¨‹å›è°ƒã€‚

è°ƒç”¨é€‰æ‹©å™¨ä¹‹å‰å¿…é¡»å®ç° [IPickerPresenter](https://github.com/yangpeixing/YImagePicker/wiki/Documentation_3.x#è‡ªå®šä¹‰IPickerPresenter)  æ¥å£

[é€‰æ‹©å™¨é—®é¢˜è§£ç­”æ±‡æ€»](https://github.com/yangpeixing/YImagePicker/wiki/questions)

[ç‚¹å‡»æŸ¥çœ‹3.xè¯¦ç»†APIæ–‡æ¡£](https://github.com/yangpeixing/YImagePicker/wiki/Documentation_3.x)

[apkä½“éªŒåœ°å€ - å¯†ç ï¼š123456](https://www.pgyer.com/imagepicker) 

### æ•ˆæœå›¾é›†
 - **demoæ•ˆæœ**
 
![demoæ•ˆæœ](https://imgconvert.csdnimg.cn/aHR0cHM6Ly93d3cucGd5ZXIuY29tL2ltYWdlL3ZpZXcvYXBwX3NjcmVlbnNob3RzL2Y5YWUxNmNiNWZmZWFjZGY4OWVmZDA2YzE5MTA4MWIxLTUyOA?x-oss-process=image/format,png)

 - **å°çº¢ä¹¦æ ·å¼**

![å°çº¢ä¹¦æ ·å¼](https://www.pgyer.com/image/view/app_screenshots/5378234cde61dec8d3823ebbbfa0255a-528)
![å°çº¢ä¹¦æ ·å¼](https://app-screenshot.pgyer.com/image/view/app_screenshots/87b43cb9ef8f40377bc3910b3ad3737b-528)
![å°çº¢ä¹¦æ ·å¼](https://www.pgyer.com/image/view/app_screenshots/9f6ccada146068692fda0e30b7a5df18-528)

 - **å¾®ä¿¡æ ·å¼**
 
![å¾®ä¿¡æ ·å¼](https://www.pgyer.com/image/view/app_screenshots/825b3d168d70ab4539aed61af6be7f36-528)
![å¾®ä¿¡æ ·å¼](https://app-screenshot.pgyer.com/image/view/app_screenshots/21145d344498c57954704bde3e0e7dfc-528)
![å¾®ä¿¡æ ·å¼](https://www.pgyer.com/image/view/app_screenshots/1ec0113d850e5ee9917172a447c2737f-528)

 - **è‡ªå®šä¹‰æ ·å¼**
 
![è‡ªå®šä¹‰æ ·å¼](https://www.pgyer.com/image/view/app_screenshots/74e132b3b997df394a41f0c0b8622467-528)
![è‡ªå®šä¹‰æ ·å¼](https://app-screenshot.pgyer.com/image/view/app_screenshots/57a62bcc84844400878fdb343cf762e8-528) 
 

 - **è‡ªå®šä¹‰æ¯”ä¾‹å‰ªè£**
 
 ![è‡ªå®šä¹‰æ¯”ä¾‹å‰ªè£](https://app-screenshot.pgyer.com/image/view/app_screenshots/15483adb087360ff49e831cb988adce1-528)
 ![è‡ªå®šä¹‰æ¯”ä¾‹å‰ªè£](https://app-screenshot.pgyer.com/image/view/app_screenshots/4cf64a6afb74b6457103bd04debb7e58-528)
 
 
 - **å¤šå›¾å‰ªè£é¡µé¢(ä»¿aloha)**
 
 ![aloha](https://www.pgyer.com/image/view/app_screenshots/a35c837bd25612c9b04f097f99457d62-528)
 
### å¾®ä¿¡å›¾ç‰‡é€‰æ‹©
æ”¯æŒè§†é¢‘ã€GIFã€é•¿å›¾é€‰æ‹©ï¼Œæ”¯æŒé€‰æ‹©çŠ¶æ€ä¿å­˜ã€‚è°ƒç”¨å‰è¯·æŒ‰ç…§demoå®ç°IPickerPresenteræ¥å£ ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š
[WeChatPresenter](https://github.com/yangpeixing/YImagePicker/blob/master/YPX_ImagePicker_androidx/app/src/main/java/com/ypx/imagepickerdemo/style/WeChatPresenter.java) 

```java
ImagePicker.withMulti(new WeChatPresenter())//æŒ‡å®špresenter                                 
        //è®¾ç½®é€‰æ‹©çš„æœ€å¤§æ•° 
        .setMaxCount(9)  
        //è®¾ç½®åˆ—æ•°                                                  
        .setColumnCount(4)      
        //è®¾ç½®è¦åŠ è½½çš„æ–‡ä»¶ç±»å‹ï¼Œå¯æŒ‡å®šå•ä¸€ç±»å‹  
        .mimeTypes(MimeType.ofAll()) 
        //è®¾ç½®éœ€è¦è¿‡æ»¤æ‰åŠ è½½çš„æ–‡ä»¶ç±»å‹ 
        .filterMimeTypes(MimeType.GIF)       
        .showCamera(true)//æ˜¾ç¤ºæ‹ç…§ 
        .setPreview(true)//å¼€å¯é¢„è§ˆ                                                  
        //å¤§å›¾é¢„è§ˆæ—¶æ˜¯å¦æ”¯æŒé¢„è§ˆè§†é¢‘
        .setPreviewVideo(true)  
        //è®¾ç½®è§†é¢‘å•é€‰                                     
        .setVideoSinglePick(true) 
        //è®¾ç½®å›¾ç‰‡å’Œè§†é¢‘å•ä¸€ç±»å‹é€‰æ‹© 
        .setSinglePickImageOrVideoType(true) 
        //å½“å•é€‰æˆ–è€…è§†é¢‘å•é€‰æ—¶ï¼Œç‚¹å‡»itemç›´æ¥å›è°ƒï¼Œæ— éœ€ç‚¹å‡»å®ŒæˆæŒ‰é’®          
        .setSinglePickWithAutoComplete(false)
        //æ˜¾ç¤ºåŸå›¾  
        .setOriginal(true)  
        //æ˜¾ç¤ºåŸå›¾æ—¶é»˜è®¤åŸå›¾é€‰é¡¹å¼€å…³  
        .setDefaultOriginal(false)
        //è®¾ç½®å•é€‰æ¨¡å¼ï¼Œå½“maxCount==1æ—¶ï¼Œå¯æ‰§è¡Œå•é€‰ï¼ˆä¸‹æ¬¡é€‰ä¸­ä¼šå–æ¶ˆä¸Šä¸€æ¬¡é€‰ä¸­ï¼‰
        .setSelectMode(SelectMode.MODE_SINGLE)   
        //è®¾ç½®è§†é¢‘å¯é€‰å–çš„æœ€å¤§æ—¶é•¿,åŒæ—¶ä¹Ÿæ˜¯è§†é¢‘å¯å½•åˆ¶çš„æœ€å¤§æ—¶é•¿
        .setMaxVideoDuration(1200000L)  
        //è®¾ç½®è§†é¢‘å¯é€‰å–çš„æœ€å°æ—¶é•¿                                  
        .setMinVideoDuration(60000L) 
        //è®¾ç½®ä¸Šä¸€æ¬¡æ“ä½œçš„å›¾ç‰‡åˆ—è¡¨ï¼Œä¸‹æ¬¡é€‰æ‹©æ—¶é»˜è®¤æ¢å¤ä¸Šä¸€æ¬¡é€‰æ‹©çš„çŠ¶æ€ 
        .setLastImageList(null) 
        //è®¾ç½®éœ€è¦å±è”½æ‰çš„å›¾ç‰‡åˆ—è¡¨ï¼Œä¸‹æ¬¡é€‰æ‹©æ—¶å·²å±è”½çš„æ–‡ä»¶ä¸å¯é€‰æ‹©
        .setShieldList(null)               
        .pick(this, new OnImagePickCompleteListener() {  
            @Override    
            public void onImagePickComplete(ArrayList<ImageItem> items) {          
                //å›¾ç‰‡é€‰æ‹©å›è°ƒï¼Œä¸»çº¿ç¨‹                  
            }                
        });                                                                                                                              
```
### å°çº¢ä¹¦å›¾ç‰‡é€‰æ‹©
é«˜ä»¿å°çº¢ä¹¦å›¾ç‰‡å‰ªè£æ¡†æ¶ï¼Œæ”¯æŒè§†é¢‘ä»¥åŠå¤šå›¾å‰ªè£ã€æ”¯æŒè§†é¢‘é¢„è§ˆï¼Œæ”¯æŒUIè‡ªå®šä¹‰ï¼Œæ”¯æŒfragmentæ ·å¼ä¾µå…¥ã€‚è°ƒç”¨å‰è¯·æŒ‰ç…§demoå®ç°IPickerPresenteræ¥å£ ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š
[RedBookPresenter](https://github.com/yangpeixing/YImagePicker/blob/master/YPX_ImagePicker_androidx/app/src/main/java/com/ypx/imagepickerdemo/style/RedBookPresenter.java) 
```java
ImagePicker.withCrop(new RedBookPresenter())//è®¾ç½®presenter                
        .setMaxCount(9)//è®¾ç½®é€‰æ‹©æ•°é‡                                          
        .showCamera(true)//è®¾ç½®æ˜¾ç¤ºæ‹ç…§                                        
        .setColumnCount(4)//è®¾ç½®åˆ—æ•°                                         
        .mimeTypes(MimeType.ofImage())//è®¾ç½®éœ€è¦åŠ è½½çš„æ–‡ä»¶ç±»å‹                      
        .filterMimeTypes(MimeType.GIF)//è®¾ç½®éœ€è¦è¿‡æ»¤æ‰çš„æ–‡ä»¶ç±»å‹                     
        .assignGapState(false)//å¼ºåˆ¶ç•™ç™½æ¨¡å¼                                   
        .setFirstImageItem(null)//è®¾ç½®ä¸Šä¸€æ¬¡é€‰ä¸­çš„å›¾ç‰‡                             
        .setFirstImageItemSize(1,1)//è®¾ç½®ä¸Šä¸€æ¬¡é€‰ä¸­çš„å›¾ç‰‡åœ°å€                        
        .setVideoSinglePick(true)//è®¾ç½®è§†é¢‘å•é€‰                                
        .setMaxVideoDuration(1200000L)//è®¾ç½®å¯é€‰åŒºçš„æœ€å¤§è§†é¢‘æ—¶é•¿                        
        .setMinVideoDuration(60000L)//è®¾ç½®è§†é¢‘å¯é€‰å–çš„æœ€å°æ—¶é•¿                       
        .pick(this, new OnImagePickCompleteListener() {                  
            @Override                                                    
            public void onImagePickComplete(ArrayList<ImageItem> items) {
                //å›¾ç‰‡å‰ªè£å›è°ƒï¼Œä¸»çº¿ç¨‹                                             
                //æ³¨æ„ï¼šå‰ªè£å›è°ƒé‡Œçš„ImageItemä¸­getCropUrl()æ‰æ˜¯å‰ªè£è¿‡åçš„å›¾ç‰‡åœ°å€             
            }                                                            
        });                                                       
```
### é¢„è§ˆ
æ”¯æŒå¤šå›¾é¢„è§ˆå’Œè‡ªå®šä¹‰é¢„è§ˆç•Œé¢ï¼Œæ”¯æŒåŠ è½½å¤§å›¾ï¼Œè¶…é•¿å›¾å’Œé«˜æ¸…å›¾ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š
```java
//é…ç½®éœ€è¦é¢„è§ˆçš„æ‰€æœ‰å›¾ç‰‡åˆ—è¡¨,å…¶ä¸­imageitemå¯æ›¿æ¢ä¸ºUriæˆ–è€…String(ç»å¯¹è·¯å¾„)
ArrayList<ImageItem> allPreviewImageList = new ArrayList<>();

//é»˜è®¤é€‰ä¸­çš„å›¾ç‰‡ç´¢å¼•
int defaultPosition = 0;
//å¼€å¯é¢„è§ˆ
ImagePicker.preview(this, new WXImgPickerPresenter(), allPreviewImageList, defaultPosition, new OnImagePickCompleteListener() {
        @Override
        public void onImagePickComplete(ArrayList<ImageItem> items) {
            //å›¾ç‰‡ç¼–è¾‘å›è°ƒï¼Œä¸»çº¿ç¨‹
        }
    });                                                           
```

### æ‹ç…§ 3.1ç‰ˆæœ¬å·²å˜æ›´
æ”¯æŒç›´æ¥æ‰“å¼€æ‘„åƒå¤´æ‹ç…§ï¼Œ3.1ç‰ˆæœ¬å»é™¤äº†åŸæœ‰çš„æ‹ç…§ä¿å­˜è·¯å¾„,æ–°å¢äº†isCopyInDCIMå…¥å‚,ä»£è¡¨æ˜¯å¦å°†æ‹ç…§çš„å›¾ç‰‡copyä¸€ä»½åˆ°å¤–éƒ¨DCIMç›®å½•ä¸­
å› ä¸ºå®‰å“Qç¦æ­¢ç›´æ¥å†™å…¥æ–‡ä»¶åˆ°ç³»ç»ŸDCIMæ–‡ä»¶ä¸‹ï¼Œæ‰€ä»¥æ‹ç…§å…¥å‚å¿…é¡»æ˜¯ç§æœ‰ç›®å½•è·¯å¾„.æ‰€ä»¥åºŸå¼ƒæ‰åŸæœ‰çš„imagepathå…¥å‚
å¦‚æœæƒ³è®©æ‹æ‘„çš„ç…§ç‰‡å†™å…¥å¤–éƒ¨å­˜å‚¨ä¸­ï¼Œåˆ™éœ€è¦copyä¸€ä»½æ–‡ä»¶åˆ°DCIMç›®å½•ä¸­å¹¶åˆ·æ–°åª’ä½“åº“
ç¤ºä¾‹å¦‚ä¸‹ï¼š
```java
String name="å›¾ç‰‡åç§°,ä¸è¦åŠ åç¼€";//å¯ä¸ºnull
boolean isCopyInDCIM=true;//copyä¸€ä»½ä¿å­˜åˆ°ç³»ç»Ÿç›¸å†Œæ–‡ä»¶
ImagePicker.takePhoto(this,name,isCopyInDCIM, new OnImagePickCompleteListener() {
        @Override
        public void onImagePickComplete(ArrayList<ImageItem> items) {
            //æ‹ç…§å›è°ƒï¼Œä¸»çº¿ç¨‹
        }
    });
```

### æ‹æ‘„è§†é¢‘ 3.1ç‰ˆæœ¬å·²å˜æ›´
æ”¯æŒç›´æ¥æ‰“å¼€æ‘„åƒå¤´æ‹è§†é¢‘ï¼Œ3.1å·²å˜æ›´,å˜æ›´ç†ç”±å‚è€ƒæ‹ç…§ ç¤ºä¾‹å¦‚ä¸‹ï¼š
```java
String name="è§†é¢‘åç§°,ä¸è¦åŠ åç¼€";//å¯ä¸ºnull
long maxDuration=10000l;//å¯å½•åˆ¶çš„æœ€å¤§æ—¶å¸¸,å•ä½æ¯«ç§’ms
boolean isCopyInDCIM=true;//copyä¸€ä»½ä¿å­˜åˆ°ç³»ç»Ÿç›¸å†Œæ–‡ä»¶
ImagePicker.takeVideo(this,name,maxDuration, isCopyInDCIM,new OnImagePickCompleteListener() {
        @Override
        public void onImagePickComplete(ArrayList<ImageItem> items) {
            //è§†é¢‘å›è°ƒï¼Œä¸»çº¿ç¨‹
        }
    });
```

### è°ƒç”¨é€‰æ‹©å™¨å¹¶å‰ªè£
æ”¯æŒé€‰æ‹©å›¾ç‰‡å®Œè°ƒç”¨å‰ªè£ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¯”ä¾‹å‰ªè£ï¼Œæ”¯æŒåœ†å½¢å‰ªè£ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š
 ```java
ImagePicker.withMulti(new WeChatPresenter())
            .mimeTypes(MimeType.ofImage())
            .filterMimeTypes(MimeType.GIF)
            //å‰ªè£å®Œæˆçš„å›¾ç‰‡æ˜¯å¦ä¿å­˜åœ¨DCIMç›®å½•ä¸‹
            //trueï¼šå­˜å‚¨åœ¨DCIMä¸‹ falseï¼šå­˜å‚¨åœ¨ data/åŒ…å/files/imagePicker/ ç›®å½•ä¸‹
            .cropSaveInDCIM(false)
             //è®¾ç½®å‰ªè£æ¯”ä¾‹
            .setCropRatio(1,1)
            //è®¾ç½®å‰ªè£æ¡†é—´è·ï¼Œå•ä½px
            .cropRectMinMargin(50)
             //æ˜¯å¦åœ†å½¢å‰ªè£ï¼Œåœ†å½¢å‰ªè£æ—¶ï¼ŒsetCropRatioæ— æ•ˆ
            .cropAsCircle()
             //è®¾ç½®å‰ªè£æ¨¡å¼ï¼Œç•™ç™½æˆ–å……æ»¡  CropConfig.STYLE_GAP æˆ– CropConfig.STYLE_FILL
            .cropStyle(CropConfig.STYLE_FILL)
             //è®¾ç½®ç•™ç™½æ¨¡å¼ä¸‹ç”Ÿæˆçš„å›¾ç‰‡èƒŒæ™¯è‰²ï¼Œæ”¯æŒé€æ˜èƒŒæ™¯
            .cropGapBackgroundColor(Color.TRANSPARENT)
            .crop(this, new OnImagePickCompleteListener() {
                @Override
                public void onImagePickComplete(ArrayList<ImageItem> items) {
                    //å›¾ç‰‡å‰ªè£å›è°ƒï¼Œä¸»çº¿ç¨‹
                }
            });                                                   
```

### æ‹ç…§å¹¶å‰ªè£
æ”¯æŒç›´æ¥æ‰“å¼€æ‘„åƒå¤´æ‹ç…§å¹¶å‰ªè£ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¯”ä¾‹å‰ªè£å’Œåœ†å½¢å‰ªè£ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š
```java
//é…ç½®å‰ªè£å±æ€§
CropConfig cropConfig = new CropConfig();
//è®¾ç½®ä¸Šä¸€æ¬¡å‰ªè£çŸ©é˜µä½ç½®ä¿¡æ¯,ç”¨äºæ¢å¤ä¸Šä¸€æ¬¡å‰ªè£,Infoç±»å‹ä»imageitemæˆ–è€…cropimageviewä¸­å–,å¯ä¸ºnull
cropConfig.setCropRestoreInfo(new Info());
 //è®¾ç½®å‰ªè£æ¯”ä¾‹
cropConfig.setCropRatio(1, 1);
//è®¾ç½®å‰ªè£æ¡†é—´è·ï¼Œå•ä½px
cropConfig.setCropRectMargin(100);
//æ˜¯å¦ä¿å­˜åˆ°DCIMç›®å½•ä¸‹ï¼Œfalseæ—¶ä¼šç”Ÿæˆåœ¨ data/files/imagepicker/ ç›®å½•ä¸‹
cropConfig.saveInDCIM(false);
//æ˜¯å¦åœ†å½¢å‰ªè£ï¼Œåœ†å½¢å‰ªè£æ—¶ï¼ŒsetCropRatioæ— æ•ˆ
cropConfig.setCircle(false);
//è®¾ç½®å‰ªè£æ¨¡å¼ï¼Œç•™ç™½æˆ–å……æ»¡  CropConfig.STYLE_GAP æˆ– CropConfig.STYLE_FILL
cropConfig.setCropStyle(CropConfig.STYLE_GAP);
//è®¾ç½®ç•™ç™½æ¨¡å¼ä¸‹ç”Ÿæˆçš„å›¾ç‰‡èƒŒæ™¯è‰²ï¼Œæ”¯æŒé€æ˜èƒŒæ™¯
cropConfig.setCropGapBackgroundColor(Color.TRANSPARENT );
//è°ƒç”¨æ‹ç…§
ImagePicker.takePhotoAndCrop(this, new WXImgPickerPresenter(), cropConfig, 
    new OnImagePickCompleteListener() {
        @Override
        public void onImagePickComplete(ArrayList<ImageItem> items) {
            //å‰ªè£å›è°ƒï¼Œä¸»çº¿ç¨‹
        }
    });
```

### ç›´æ¥å‰ªè£
æ”¯æŒç›´æ¥è·³è½¬å‰ªè£é¡µé¢ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š
```java
CropConfig cropConfig = new CropConfig();
//è®¾ç½®ä¸Šä¸€æ¬¡å‰ªè£çŸ©é˜µä½ç½®ä¿¡æ¯,ç”¨äºæ¢å¤ä¸Šä¸€æ¬¡å‰ªè£,Infoç±»å‹ä»imageitemæˆ–è€…cropimageviewä¸­å–,å¯ä¸ºnull
cropConfig.setCropRestoreInfo(new Info());
 //è®¾ç½®å‰ªè£æ¯”ä¾‹
cropConfig.setCropRatio(1, 1);
//è®¾ç½®å‰ªè£æ¡†é—´è·ï¼Œå•ä½px
cropConfig.setCropRectMargin(100);
//æ˜¯å¦ä¿å­˜åˆ°DCIMç›®å½•ä¸‹ï¼Œfalseæ—¶ä¼šç”Ÿæˆåœ¨ data/files/imagepicker/ ç›®å½•ä¸‹
cropConfig.saveInDCIM(false);
//æ˜¯å¦åœ†å½¢å‰ªè£ï¼Œåœ†å½¢å‰ªè£æ—¶ï¼ŒsetCropRatioæ— æ•ˆ
cropConfig.setCircle(false);
//è®¾ç½®å‰ªè£æ¨¡å¼ï¼Œç•™ç™½æˆ–å……æ»¡  CropConfig.STYLE_GAP æˆ– CropConfig.STYLE_FILL
cropConfig.setCropStyle(CropConfig.STYLE_GAP);
//è®¾ç½®ç•™ç™½æ¨¡å¼ä¸‹ç”Ÿæˆçš„å›¾ç‰‡èƒŒæ™¯è‰²ï¼Œæ”¯æŒé€æ˜èƒŒæ™¯
cropConfig.setCropGapBackgroundColor(Color.TRANSPARENT );
//è°ƒç”¨å‰ªè£
String needCropImageUrl="éœ€è¦å‰ªè£çš„å›¾ç‰‡è·¯å¾„";
ImagePicker.crop(this, new WXImgPickerPresenter(), cropConfig, needCropImageUrlï¼Œ
    new OnImagePickCompleteListener() {
        @Override
        public void onImagePickComplete(ArrayList<ImageItem> items) {
            //å‰ªè£å›è°ƒï¼Œä¸»çº¿ç¨‹
        }
    });
```

### æä¾›åª’ä½“æ•°æ®â€”â€”æ”¯æŒå›è°ƒç›¸å†Œæ•°æ®ã€æ‰€æœ‰åª’ä½“æ•°æ®ã€æŒ‡å®šç›¸å†Œå†…åª’ä½“æ•°æ®
#### è·å–åª’ä½“ç›¸å†Œæ•°æ®
```java
//æŒ‡å®šè¦å›è°ƒçš„ç›¸å†Œç±»å‹ï¼Œå¯ä»¥æŒ‡å®š13ç§å›¾ç‰‡è§†é¢‘æ–‡ä»¶æ ¼å¼æ··åˆ
Set<MimeType> mimeTypes = MimeType.ofAll();
ImagePicker.provideMediaSets(this, mimeTypes, new MediaSetsDataSource.MediaSetProvider() {
    @Override
    public void providerMediaSets(ArrayList<ImageSet> imageSets) {
        //ç›¸å†Œåˆ—è¡¨å›è°ƒï¼Œä¸»çº¿ç¨‹
    }
});
```
#### è·å–å…¨éƒ¨åª’ä½“æ–‡ä»¶
```java
//æŒ‡å®šè¦å›è°ƒçš„ç›¸å†Œç±»å‹ï¼Œå¯ä»¥æŒ‡å®š13ç§å›¾ç‰‡è§†é¢‘æ–‡ä»¶æ ¼å¼æ··åˆ
Set<MimeType> mimeTypes = MimeType.ofAll();
ImagePicker.provideAllMediaItems(this, mimeTypes, new MediaItemsDataSource.MediaItemProvider() {
        @Override
        public void providerMediaItems(ArrayList<ImageItem> imageItems, ImageSet allVideoSet) {
            //å…¨éƒ¨åª’ä½“æ•°æ®å›è°ƒï¼Œä¸»çº¿ç¨‹
            //åªæœ‰å½“mimeTypesæ—¢åŒ…å«å›¾ç‰‡æˆ–è€…è§†é¢‘æ ¼å¼æ–‡ä»¶æ—¶ï¼ŒallVideoSetæ‰æœ‰å€¼
        }
    });
```
#### è·å–æŒ‡å®šç›¸å†Œå†…å…¨éƒ¨åª’ä½“æ–‡ä»¶
```java
//æŒ‡å®šè¦å›è°ƒçš„ç›¸å†Œç±»å‹ï¼Œå¯ä»¥æŒ‡å®š13ç§å›¾ç‰‡è§†é¢‘æ–‡ä»¶æ ¼å¼æ··åˆ
Set<MimeType> mimeTypes = MimeType.ofAll();
//æŒ‡å®šç›¸å†Œï¼Œidä¸èƒ½ä¸ºç©º
ImageSet imageSet = new ImageSet();
ImagePicker.provideMediaItemsFromSet(this, imageSet, mimeTypes, new MediaItemsDataSource.MediaItemProvider() {
        @Override
        public void providerMediaItems(ArrayList<ImageItem> imageItems, ImageSet allVideoSet) {
            //å…¨éƒ¨åª’ä½“æ•°æ®å›è°ƒï¼Œä¸»çº¿ç¨‹
            //åªæœ‰å½“mimeTypesæ—¢åŒ…å«å›¾ç‰‡æˆ–è€…è§†é¢‘æ ¼å¼æ–‡ä»¶æ—¶ï¼ŒallVideoSetæ‰æœ‰å€¼
        }
    });
```
#### é¢„åŠ è½½è·å–æŒ‡å®šç›¸å†Œå†…å…¨éƒ¨åª’ä½“æ–‡ä»¶
```java
//æŒ‡å®šè¦å›è°ƒçš„ç›¸å†Œç±»å‹ï¼Œå¯ä»¥æŒ‡å®š13ç§å›¾ç‰‡è§†é¢‘æ–‡ä»¶æ ¼å¼æ··åˆ
Set<MimeType> mimeTypes = MimeType.ofAll();
//æŒ‡å®šç›¸å†Œï¼Œidä¸èƒ½ä¸ºç©º
ImageSet imageSet = new ImageSet();
//é¢„åŠ è½½ä¸ªæ•°
int preloadSize = 40;
ImagePicker.provideMediaItemsFromSetWithPreload(this, imageSet, mimeTypes, preloadSize, 
    new MediaItemsDataSource.MediaItemPreloadProvider() {
        @Override
        public void providerMediaItems(ArrayList<ImageItem> imageItems) {
            //é¢„åŠ è½½å›è°ƒï¼Œé¢„å…ˆåŠ è½½æŒ‡å®šæ•°ç›®çš„åª’ä½“æ–‡ä»¶å›è°ƒ
        }
    },
    new MediaItemsDataSource.MediaItemProvider() {
        @Override
        public void providerMediaItems(ArrayList<ImageItem> imageItems, ImageSet allVideoSet) {
            //æ‰€æœ‰åª’ä½“æ–‡ä»¶å›è°ƒ
            }
        });
```

### ä½¿ç”¨å‰è¯·åŠ¡å¿…é˜…è¯»[é€‰æ‹©å™¨é—®é¢˜è§£ç­”æ±‡æ€»](https://github.com/yangpeixing/YImagePicker/wiki/questions)ä»¥åŠ [3.xä½¿ç”¨æ–‡æ¡£](https://github.com/yangpeixing/YImagePicker/wiki/Documentation_3.x)

### ç‰ˆæœ¬è®°å½•
[æŸ¥çœ‹è¯¦ç»†ç‰ˆæœ¬è®°å½•](https://github.com/yangpeixing/YImagePicker/wiki/YImagePickerç‰ˆæœ¬è®°å½•)

#### 3.1.4ç‰ˆæœ¬ [2020.04.15]
1. ä¿®å¤3.1.3ç‰ˆæœ¬pathå–ä¸åˆ°ç»å¯¹è·¯å¾„é—®é¢˜
2. ä¿®å¤quicktimeç±»å‹è§†é¢‘æ— æ³•è¿‡æ»¤çš„é—®é¢˜

#### 3.1.3ç‰ˆæœ¬ [2020.04.09]
1. ä¿®å¤å®‰å“10ä¸Šå…¨éƒ¨è§†é¢‘æ–‡ä»¶å¤¹ç¼©ç•¥å›¾ä¸å±•ç¤º 
2. ä¿®å¤å®‰å“10ä¸Šéƒ¨åˆ†æ‰‹æœºä¸Šéƒ¨åˆ†å›¾ç‰‡æ— æ³•å±•ç¤ºé—®é¢˜ 
3. ä¿®å¤å¤§å›¾é¢„è§ˆæ”¾å¤§ç¼©å°å¡é¡¿é—®é¢˜ 
4. å½»åº•ä¿®å¤toolargeé—ªé€€ 
5. ä¼˜åŒ–äº†å›¾ç‰‡å‰ªè£é¢„è§ˆè´¨é‡ 
6. ä¿®å¤é¢„è§ˆç•Œé¢æ— æ³•é¢„è§ˆè§†é¢‘é—®é¢˜ 
7. é¢„è§ˆæ”¯æŒè‡ªå®šä¹‰é¢„è§ˆitemï¼Œå¯æ ¹æ®å›¾ç‰‡è¿˜æ˜¯è§†é¢‘åŠ¨æ€æ˜¾ç¤ºå¸ƒå±€ 
8. presenterçš„interceptItemClickæ–¹æ³•æ–°å¢isClickCheckBoxå…¥å‚ï¼Œä»£è¡¨æ‹¦æˆªçš„å¯¹è±¡æ˜¯å¦æ˜¯ç‚¹å‡»å³ä¸Šè§’checkbox 
9. æ–°å¢showCameraOnlyInAllMediaSetæ–¹æ³•ä»£è¡¨æ˜¯å¦åªåœ¨å…¨éƒ¨æ–‡ä»¶å¤¹é‡Œæ‰å±•ç¤ºæ‹ç…§itemï¼Œå…¶ä»–æ–‡ä»¶å¤¹ä¸å±•ç¤º 
10. imageitemæ–°å¢displayNameå­—æ®µä»£è¡¨æ–‡ä»¶åç§° 
11. å…¶ä»–æ›´å¤šç»†èŠ‚ä¼˜åŒ–

#### 3.1ç‰ˆæœ¬ [2020.02.24]
1. [ä¼˜åŒ–]isOriginalImageåŠ å…¥åˆ°imageitemé‡Œ
2. [å˜æ›´]è‡ªå®šä¹‰æ–‡æœ¬ç»Ÿä¸€,åˆ é™¤äº†PickerConstantsç±»,presenterä¸­æ— éœ€å¯¹é€‰æ‹©å™¨æ–‡æ¡ˆè¿›è¡Œä¿®æ”¹,è‹¥éœ€è¦ä¿®æ”¹æ–‡æ¡ˆ,åˆ™ç›´æ¥å¤åˆ¶imagepickerä¸­stringæ–‡ä»¶,å¦å¤–demoå·²è¦†ç›–è‹±æ–‡é€‚é…
3. [ä¼˜åŒ–]å¤šå›¾å‰ªè£å·²åŠ å…¥demo(AlohaActivity)
4. [bugä¿®å¤]é•¿å›¾å‰ªè£å´©æºƒé—®é¢˜
5. [bugä¿®å¤]å…³é—­å±å¹•æ—‹è½¬é—®é¢˜
6. [æ–°å¢]æ–°å¢setDefaultOriginalç”¨äºè®¾ç½®æ­¤æ¬¡æ‰“å¼€é€‰æ‹©å™¨çš„é»˜è®¤åŸå›¾å¼€å…³
7. [æ–°å¢]å•å›¾å‰ªè£æ”¯æŒä¿å­˜çŠ¶æ€,ä¸‹æ¬¡æ¢å¤
8. [æ–°å¢]å½•åˆ¶è§†é¢‘æ·»åŠ æœ€å¤§æ—¶é•¿é…ç½®
9. [ä¼˜åŒ–]å®Œå…¨å…¼å®¹androudQæ‹ç…§é—®é¢˜
10. [æ–°å¢]UiPickerConfigæ–°å¢ä¸»é¢˜è‰²è®¾ç½®
11. [ä¼˜åŒ–]demoæ¶æ„è°ƒæ•´,ä½¿ç”¨è€…å‚è€ƒæ›´æ¸…æ™°


### ä¸‹ä¸ªç‰ˆæœ¬æ’æœŸ
æ—¶é—´ï¼šæš‚å®š2020å¹´5æœˆä¸­æ—¬
 1. [å‰ªè£æ”¯æŒè¾“å‡ºå¤§å°](https://github.com/yangpeixing/YImagePicker/issues/19)
 2. [å‰ªè£æ”¯æŒæ—‹è½¬ï¼ˆå°½é‡)](https://github.com/yangpeixing/YImagePicker/issues/32)
 3. [æ–‡ä»¶å¤§å°åŠ è½½é™åˆ¶](https://github.com/yangpeixing/YImagePicker/issues/41)
 4. æ”¯æŒdarkmodeæ¨¡å¼
 5. æ”¯æŒactivityè‡ªå®šä¹‰è·³è½¬åŠ¨ç”»
 6. å†…ç½®æ–°ç‰ˆæœ¬å¾®ä¿¡æ ·å¼ï¼ŒçŸ¥ä¹æ ·å¼ç­‰
 7. æ”¯æŒåˆ‡æ¢è§†é¢‘åº•å±‚æ¡†æ¶ï¼ˆåæ§½ï¼šå®˜æ–¹videoViewå¤ªéš¾ç”¨äº†~~/(ã„’oã„’)/~~ï¼‰
 8. **ç­‰ä½ æ¥æ**

 æ°¸ä¸TODOï¼š
 1. ä¸ä¼šæ”¯æŒå›¾ç‰‡å‹ç¼©ï¼Œè¯·ä½¿ç”¨è€…è‡ªè¡Œä½¿ç”¨luBan
 2. ä¸ä¼šæ”¯æŒå›¾ç‰‡å’Œè§†é¢‘é«˜çº§ç¼–è¾‘ï¼ˆæ»¤é•œã€è´´çº¸ç­‰ï¼‰

### æ„Ÿè°¢
- æœ¬æ¡†æ¶åª’ä½“åº“æŸ¥è¯¢éƒ¨åˆ†å€Ÿé‰´äºçŸ¥ä¹å¼€æºæ¡†æ¶Matiseeï¼Œå¹¶åœ¨å…¶åŸºç¡€ä¸Šæ‹“å±•å¹¶å»¶ä¼¸ï¼Œè®©æŸ¥è¯¢æ›´å¯Œæœ‰å®šåˆ¶æ€§ï¼Œåœ¨æ­¤å¯¹MatiseeåŸä½œè€…è¡¨ç¤ºæ„Ÿè°¢ã€‚

- æœ¬åº“æ¥æºäºmars App,æƒ³è¦ä½“éªŒåŸå¸‚æœ€æ–°çš„åƒå–ç©ä¹ï¼Œæ¬¢è¿è¯»è€…ä¸‹è½½ä½“éªŒmars!

- æ„Ÿè°¢æ‰€æœ‰æ”¯æŒæˆ–staræœ¬é¡¹ç›®çš„ä½¿ç”¨è€…ï¼Œæ„Ÿè°¢æ‰€æœ‰ç»™æˆ‘æissueçš„æœ‹å‹ä»¬ ï¼

### å¿ƒå£°

 YImagePickerä»å½“åˆçš„åªæ”¯æŒå¾®ä¿¡å›¾ç‰‡é€‰æ‹©å™¨åˆ°æ”¯æŒå°çº¢ä¹¦æ ·å¼ï¼Œå†åˆ°å„ç§è‡ªå®šä¹‰ï¼Œå¯è°“èŠ±è´¹äº†æˆ‘è¿‘ä¸€å¹´å¤šçš„æ—¶å…‰ï¼Œå¯èƒ½æœ‰äººè§‰å¾—è¿™ä¸ªé¡¹ç›®å¾ˆç®€å•ï¼Œä½†æ˜¯ä»å¼€æºæ€§çš„è§’åº¦ä¸Šæ¥è¯´ï¼Œå¾ˆå¤šæ—¶å€™ä»£ç ä¸æ˜¯æˆ‘ä»¬æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™çš„ã€‚ä¸ºäº†è¾¾æˆç»Ÿä¸€é£æ ¼ï¼Œæœ¬äººä¹Ÿå€Ÿé‰´äº†ä¸ä¸‹äº20å¤šä¸ªå›¾ç‰‡é€‰æ‹©åº“ã€‚ä½†æ˜¯éšç€ä¸šåŠ¡çš„å¤æ‚å’Œæœºå‹çš„å¤šæ ·ï¼Œä¸å¾—ä¸ä¸€ééé‡æ„ï¼Œå…¶ä¸­å¸¦æ¥äº†ä¸å°‘çš„é—®é¢˜ï¼Œä¹Ÿå­¦ä¹ åˆ°äº†å¾ˆå¤šã€‚åœ¨æˆ‘çš„è®¡åˆ’ä¸­ï¼Œæœ¬åº“3.0ç‰ˆæœ¬ç®—æ˜¯ä¸€æ¬¡è¾ƒå¤§çš„æ›´æ–°ï¼Œç›¸æ¯”2.xæœ‰ç€æ›´ä¼˜å¼‚çš„ç¨³å®šæ€§å’Œå®šåˆ¶æ€§ã€‚ä½†è¿™ç»ä¸æ˜¯æœ€ä¼˜ç‰ˆæœ¬ï¼Œéšç€è¶Šæ¥è¶Šå¤šçš„å®šåˆ¶åŒ–éœ€æ±‚ï¼Œæ¶æ„å¯èƒ½ä¼šé¢ä¸´ä¸€æ¬¡åˆä¸€æ¬¡çš„æ›´æ–°ã€‚æ‰€ä»¥ä½¿ç”¨è€…åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å¦‚æœå‡ºç°å„ç§å„æ ·çš„é—®é¢˜ï¼Œè¿˜è¯·ä¸è¦æ”¾å¼ƒæœ¬åº“ï¼Œå¯ä»¥ç›´æ¥åŠ æˆ‘è”ç³»æ–¹å¼å¹¶åé¦ˆç»™æˆ‘ï¼ˆå–·æˆ‘ï¼‰ï¼Œå¦‚æœæœ‰æ›´å¥½çš„å»ºè®®ï¼Œä¹Ÿå¯ä»¥ç»™æˆ‘ærequestï¼Œæˆ‘ä»¬ä¸€èµ·å®Œå–„æ­¤æ¡†æ¶ã€‚æœ€åè¯´ä¸€å¥ï¼Œæ²¡æœ‰ä»€ä¹ˆæ˜¯å®Œç¾çš„ï¼Œä½†æˆ‘ä¼šåŠ›æ‰€èƒ½åŠ~


- ä½œè€…ï¼š[calorYang](https://blog.csdn.net/qq_16674697)
- é‚®ç®±ï¼š313930500@qq.com
- QQå·: 313930500 
- å¾®ä¿¡ï¼šcalor0616 
- åšå®¢ï¼š[CSDN](https://blog.csdn.net/qq_16674697)


**é‡åˆ°é—®é¢˜åˆ«ç»•è·¯ï¼ŒQQå¾®ä¿¡ç›´æ¥å‘¼~ æ‚¨çš„starå°±æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›~ğŸŒ¹**